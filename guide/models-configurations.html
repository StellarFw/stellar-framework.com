
<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Model Configuration - Stellar</title>
    <meta charset="utf-8">
    <meta name="description" content="Stellar is an action based web framework for creating Web APIs easily!">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

    <meta property="og:type" content="article">
    <meta property="og:title" content="Model Configuration - Stellar">
    <meta property="og:description" content="Stellar is an action based web framework for creating Web APIs easily!">
    <meta property="og:image" content="https://stellar-framework.com/images/logo.png">

    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Model Configuration - Stellar">
    <meta name="twitter:description" content="Stellar is an action based web framework for creating Web APIs easily!">
    <meta name="twitter:image" content="https://stellar-framework.com/images/logo.png">

    <link rel="icon" href="/images/logo.png" type="image/x-icon">

    <!-- color to use by the browsers -->
    <meta name="theme-color" content="#98588C">

    <link href='//fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600|Roboto Mono' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Dosis:500' rel='stylesheet' type='text/css'>

    <!-- main page styles -->
    <link rel="stylesheet" href="/css/page.css">

    <!-- this needs to be loaded before guide's inline scripts -->
    <script>window.PAGE_TYPE = 'guide'</script>

    <!-- Google Tag Manager -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-NSK9WJ6');</script>
    <!-- End Google Tag Manager -->
  </head>
  <body class="docs">    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NSK9WJ6"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->

    <div id="mobile-bar" >
      <a class="menu-button"></a>
      <a class="logo" href="/"></a>
    </div>

    <div id="header">
    <a id="logo" href="/">
        <img src="/images/logo.png">
        <span>Stellar</span>
    </a>
    <ul id="nav">
        <li>
  <form id="search-form">
    <input type="text" id="search-query-nav" class="search-query st-default-search-input">
  </form>
</li>
<li><a href="/guide/" class="nav-link current">Guide</a></li>
<li class="nav-dropdown-container">
  <a class="nav-link">Community</a><span class="arrow"></span>
  <ul class="nav-dropdown">
    <li><a href="https://github.com/stellarFw/stellar" class="nav-link" target="_blank">GitHub</a></li>
    <li><a href="https://gitter.im/StellarFw/StellarFw" class="nav-link" target="_blank">Chat</a></li>
    <li><a href="https://twitter.com/gil0mendes" class="nav-link" target="_blank">Twitter</a></li>
  </ul>
</li>

<li class="nav-dropdown-container ecosystem">
  <a class="nav-link">Ecosystem</a><span class="arrow"></span>
  <ul class="nav-dropdown">
    <li><a href="https://github.com/StellarFw/Identify" class="nav-link" target="_blank">Identify</a></li>
  </ul>
</li>


    </ul>
</div>

    
      <div id="main" class="fix-sidebar">
        
          
  <div class="sidebar">
  <ul class="main-menu">
    <li>
  <form id="search-form">
    <input type="text" id="search-query-sidebar" class="search-query st-default-search-input">
  </form>
</li>
<li><a href="/guide/" class="nav-link current">Guide</a></li>
<li class="nav-dropdown-container">
  <a class="nav-link">Community</a><span class="arrow"></span>
  <ul class="nav-dropdown">
    <li><a href="https://github.com/stellarFw/stellar" class="nav-link" target="_blank">GitHub</a></li>
    <li><a href="https://gitter.im/StellarFw/StellarFw" class="nav-link" target="_blank">Chat</a></li>
    <li><a href="https://twitter.com/gil0mendes" class="nav-link" target="_blank">Twitter</a></li>
  </ul>
</li>

<li class="nav-dropdown-container ecosystem">
  <a class="nav-link">Ecosystem</a><span class="arrow"></span>
  <ul class="nav-dropdown">
    <li><a href="https://github.com/StellarFw/Identify" class="nav-link" target="_blank">Identify</a></li>
  </ul>
</li>


  </ul>
  <div class="list">
    <div class="main-sponsor"></div>
    <a class="become-backer" href="/support-stellar">
      Become a Backer
    </a>

    <ul class="menu-root">
      
        
        
          
        

        <li>
          <a href="/guide/index.html" class="sidebar-link">Overview</a>
        </li>
      
        
        
          
        

        <li>
          <a href="/guide/installation.html" class="sidebar-link">Installation</a>
        </li>
      
        
        
          
        

        <li>
          <a href="/guide/actions.html" class="sidebar-link">Actions</a>
        </li>
      
        
        
          
        

        <li>
          <a href="/guide/tasks.html" class="sidebar-link">Tasks</a>
        </li>
      
        
        
          
        

        <li>
          <a href="/guide/middleware.html" class="sidebar-link">Middleware</a>
        </li>
      
        
        
          
        

        <li>
          <a href="/guide/satellites.html" class="sidebar-link">Satellites</a>
        </li>
      
        
        
          
        

        <li>
          <a href="/guide/cluster.html" class="sidebar-link">Cluster</a>
        </li>
      
        
        
          
        

        <li>
          <a href="/guide/cache.html" class="sidebar-link">Cache</a>
        </li>
      
        
        
          
        

        <li>
          <a href="/guide/chat.html" class="sidebar-link">Chat</a>
        </li>
      
        
        
          
        

        <li>
          <a href="/guide/development_mode.html" class="sidebar-link">Development Mode</a>
        </li>
      
        
        
          
        

        <li>
          <a href="/guide/file_system.html" class="sidebar-link">File System</a>
        </li>
      
        
        
          
        

        <li>
          <a href="/guide/events.html" class="sidebar-link">Events</a>
        </li>
      
        
        
          
        

        <li>
          <a href="/guide/websocket.html" class="sidebar-link">WebSocket</a>
        </li>
      
        
        
          
        

        <li>
          <a href="/guide/tcp.html" class="sidebar-link">TCP</a>
        </li>
      
        
        
          
        

        <li>
          <a href="/guide/http.html" class="sidebar-link">HTTP</a>
        </li>
      
        
        
          
        

        <li>
          <a href="/guide/security.html" class="sidebar-link">Security</a>
        </li>
      
        
        
          
        

        <li>
          <a href="/guide/validation.html" class="sidebar-link">Validation</a>
        </li>
      
        
        
          
        

        <li>
          <a href="/guide/logging.html" class="sidebar-link">Logging</a>
        </li>
      
        
        
          
        

        <li>
          <a href="/guide/commands.html" class="sidebar-link">Commands</a>
        </li>
      
        
        
          
        

        <li>
          <a href="/guide/testing.html" class="sidebar-link">Testing</a>
        </li>
      
        
        
          
            <li><h3>Models</h3></li>
          
        

        <li>
          <a href="/guide/models.html" class="sidebar-link">Introduction</a>
        </li>
      
        
        
          
        

        <li>
          <a href="/guide/models-data_types.html" class="sidebar-link">Data Types and Attributes</a>
        </li>
      
        
        
          
        

        <li>
          <a href="/guide/models-instance.html" class="sidebar-link">Instance and Class Methods</a>
        </li>
      
        
        
          
        

        <li>
          <a href="/guide/models-validations.html" class="sidebar-link">Validations</a>
        </li>
      
        
        
          
        

        <li>
          <a href="/guide/models-associations.html" class="sidebar-link">Associations</a>
        </li>
      
        
        
          
        

        <li>
          <a href="/guide/models-configurations.html" class="sidebar-link current">Model Configuration</a>
        </li>
      
        
        
          
        

        <li>
          <a href="/guide/models-queries.html" class="sidebar-link">Queries</a>
        </li>
      
    </ul>
  </div>
</div>



<div class="content guide with-sidebar models-configurations-guide">
  
    <h1>Model Configuration</h1>
  

  <h2 id="Configuration"><a href="#Configuration" class="headerlink" title="Configuration"></a>Configuration</h2><p>You can define certain top level properties on a per-model basis. These will define how your schema is synced with the datastore and allows you to turn off default behaviour.</p>
<h3 id="identity"><a href="#identity" class="headerlink" title="identity"></a>identity</h3><p>A required property on each model which describes the name of the model. This must be unique and it must be in lower case.</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">  identity: <span class="string">'foo'</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>To make your life easier, Stellar inject this property automatically, based on the filename of the model that is loading.</p>
<h3 id="connection"><a href="#connection" class="headerlink" title="connection"></a>connection</h3><p>A required property on each model that describes which connection queries will be run on. You can use either a string or an array for the value of this property. If an array is used your model will have access to methods defined on both adapters in the connections. They will inherit from right to left giving the adapter from the first connection priority in adapter methods.</p>
<p>For example, if you defined connections using both <code>sails-postgresql</code> and <code>sails-mandrill</code> and the <code>sails-mandrill</code> adapter exposes a <code>send</code> method, your model will contain all the CRUD methods exposed from <code>sails-postgresql</code> as well as a <code>send</code> method which will be run on the mandrill adapter.</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// String Format</span></span><br><span class="line"><span class="keyword">const</span> newModel = &#123;</span><br><span class="line"></span><br><span class="line">  connection: <span class="string">'my-local-postgresql'</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Array Format</span></span><br><span class="line"><span class="keyword">const</span> newModel = &#123;</span><br><span class="line"></span><br><span class="line">  connection: [ <span class="string">'my-local-postgresql'</span>, <span class="string">'sails-mandrill'</span> ]</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>When the connection property isn’t defined the global one will be used. To configure that you must set the <code>models.defaultConnection</code> config.</p>
<h3 id="migrate"><a href="#migrate" class="headerlink" title="migrate"></a>migrate</h3><p>Sets the schema to automatically <code>alter</code> the schema, <code>drop</code> the schema or make no changes (<code>safe</code>). Default: <code>alter</code></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> newModel = &#123;</span><br><span class="line"></span><br><span class="line">  migrate: <span class="string">'alter'</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>It is <strong>extremely important</strong> to set the <code>migrate</code> property to <code>safe</code> in your models when working with existing databases. If you do not to this, you will very likely <strong>lose data</strong> and do other terrible things as it tries to automatically adjust the schema.</p>
<h3 id="autoPK"><a href="#autoPK" class="headerlink" title="autoPK"></a>autoPK</h3><p>A flag to toggle the automatic primary key generation. Default: <code>true</code>.</p>
<p>If turned off no primary key will be created by default and one will need to be defined.</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> newModel = &#123;</span><br><span class="line"></span><br><span class="line">  autoPK: <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="autoCreatedAt"><a href="#autoCreatedAt" class="headerlink" title="autoCreatedAt"></a>autoCreatedAt</h3><p>A flag to toggle the automatic timestamp for createdAt. Default: <code>true</code>.</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> newModel = &#123;</span><br><span class="line"></span><br><span class="line">  autoCreatedAt: <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Note that if this flag is set and the <code>createdAt</code> property is supplied on create that value will be used to create the record in the datastore.</p>
<h3 id="autoUpdatedAt"><a href="#autoUpdatedAt" class="headerlink" title="autoUpdatedAt"></a>autoUpdatedAt</h3><p>A flag to toggle the automatic timestamp for updatedAt. Default: <code>true</code>.</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> newModel = &#123;</span><br><span class="line"></span><br><span class="line">  autoUpdatedAt: <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Note that if this flag is set and the <code>updatedAt</code> property is supplied on update, that value will be used to create the record in the datastore.</p>
<h3 id="schema"><a href="#schema" class="headerlink" title="schema"></a>schema</h3><p>A flag to toggle schemaless or schema mode in databases that support schemaless data structures. If turned off this will allow you to store arbitrary data in a record. If turned on, only attributes defined in the model’s attributes object will be allowed to be stored.</p>
<p>For adapters that don’t require a schema (such as Mongo or Redis) the default setting is to be schemaless.</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> newModel = &#123;</span><br><span class="line"></span><br><span class="line">  schema: <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="tableName"><a href="#tableName" class="headerlink" title="tableName"></a>tableName</h3><p>You can define a custom table or collection name on your adapter by adding a <code>tableName</code> attribute. If no table name is supplied it will use the identity as the table name when passing it to an adapter.</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> newModel = &#123;</span><br><span class="line"></span><br><span class="line">  tableName: <span class="string">'my-legacy-table-name'</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="Global-Configurations"><a href="#Global-Configurations" class="headerlink" title="Global Configurations"></a>Global Configurations</h2><p><strong>Must</strong> of the configurations that you can see above, they are able to be changed in all models simply setting a global configuration, as you can see on the follow example:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// production configurations</span></span><br><span class="line">exports.production = &#123;</span><br><span class="line">  models: <span class="function"><span class="params">api</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      adapters: &#123;</span><br><span class="line">        <span class="string">'mongodb'</span>: <span class="string">'sails-mongo'</span></span><br><span class="line">      &#125;,</span><br><span class="line">      connections: &#123;</span><br><span class="line">        mongodb: &#123;</span><br><span class="line">          <span class="comment">// (...)</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      defaults: &#123;</span><br><span class="line">        migrate: <span class="string">'safe'</span></span><br><span class="line">      &#125;,</span><br><span class="line">      defaultConnection: <span class="string">'mongodb'</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Setting the <code>models.defaults</code> you can overwrite the default values and set them for what you need.</p>


  
      <div class="guide-links">
        
        
          <span style="float:right"><a href="/guide/models-queries.html">Queries</a> →</span>
        
      </div>
    

    <div class="footer">
      Caught a mistake or want to contribute to documentation?
      <a href="https://github.com/StellarFw/stellar-framework.com/tree/master/src/guide/models-configurations.md" target="_blank">
        Edit this page on Github!
      </a>
    </div>
</div>

        
      </div>
      <script src="/js/smooth-scroll.min.js"></script>
    

    <!-- search -->
    <link href="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="/css/search.css">
    <script src="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.js" type="text/javascript"></script>

    <!-- main custom script for sidebar and other cool things -->
    <script src="/js/common.js"></script>

    <!-- fastclick  -->
    <script src="//cdnjs.cloudflare.com/ajax/libs/fastclick/1.0.6/fastclick.min.js"></script>
    <script>
      document.addEventListener('DOMContentLoaded', function() {
        FastClick.attach(document.body)
      }, false)
    </script>

    <!-- OneTrust Cookies Consent Notice (Production CDN, stellar-framework.com, en-GB) start -->
    <script src="https://cdn.cookielaw.org/consent/25a34b35-1a0a-41eb-bc99-7ac1e7197e7d.js" type="text/javascript" charset="UTF-8"></script>
    <script type="text/javascript">
    function OptanonWrapper() { }
    </script>
    <!-- OneTrust Cookies Consent Notice (Production CDN, stellar-framework.com, en-GB) end -->
  </body>
</html>
