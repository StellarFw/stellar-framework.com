
<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Validation - Stellar</title>
    <meta charset="utf-8">
    <meta name="description" content="Stellar is an action based web framework for creating Web APIs easily!">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

    <meta property="og:type" content="article">
    <meta property="og:title" content="Validation - Stellar">
    <meta property="og:description" content="Stellar is an action based web framework for creating Web APIs easily!">
    <meta property="og:image" content="https://stellar-framework.com/images/logo.png">

    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Validation - Stellar">
    <meta name="twitter:description" content="Stellar is an action based web framework for creating Web APIs easily!">
    <meta name="twitter:image" content="https://stellar-framework.com/images/logo.png">

    <link rel="icon" href="/images/logo.png" type="image/x-icon">

    <!-- color to use by the browsers -->
    <meta name="theme-color" content="#98588C">

    <link href='//fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600|Roboto Mono' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Dosis:500' rel='stylesheet' type='text/css'>

    <!-- main page styles -->
    <link rel="stylesheet" href="/css/page.css">

    <!-- this needs to be loaded before guide's inline scripts -->
    <script>window.PAGE_TYPE = 'guide'</script>
  </head>
  <body class="docs">    <div id="mobile-bar" >
      <a class="menu-button"></a>
      <a class="logo" href="/"></a>
    </div>

    <div id="header">
    <a id="logo" href="/">
        <img src="/images/logo.png">
        <span>Stellar</span>
    </a>
    <ul id="nav">
        <li>
  <form id="search-form">
    <input type="text" id="search-query-nav" class="search-query st-default-search-input">
  </form>
</li>
<li><a href="/guide/" class="nav-link current">Guide</a></li>
<li class="nav-dropdown-container">
  <a class="nav-link">Community</a><span class="arrow"></span>
  <ul class="nav-dropdown">
    <li><a href="https://github.com/stellarFw/stellar" class="nav-link" target="_blank">GitHub</a></li>
    <li><a href="https://gitter.im/StellarFw/StellarFw" class="nav-link" target="_blank">Chat</a></li>
    <li><a href="https://twitter.com/gil0mendes" class="nav-link" target="_blank">Twitter</a></li>
  </ul>
</li>

<li class="nav-dropdown-container ecosystem">
  <a class="nav-link">Ecosystem</a><span class="arrow"></span>
  <ul class="nav-dropdown">
    <li><a href="https://github.com/StellarFw/Identify" class="nav-link" target="_blank">Identify</a></li>
  </ul>
</li>


    </ul>
</div>

    
      <div id="main" class="fix-sidebar">
        
          
  <div class="sidebar">
  <ul class="main-menu">
    <li>
  <form id="search-form">
    <input type="text" id="search-query-sidebar" class="search-query st-default-search-input">
  </form>
</li>
<li><a href="/guide/" class="nav-link current">Guide</a></li>
<li class="nav-dropdown-container">
  <a class="nav-link">Community</a><span class="arrow"></span>
  <ul class="nav-dropdown">
    <li><a href="https://github.com/stellarFw/stellar" class="nav-link" target="_blank">GitHub</a></li>
    <li><a href="https://gitter.im/StellarFw/StellarFw" class="nav-link" target="_blank">Chat</a></li>
    <li><a href="https://twitter.com/gil0mendes" class="nav-link" target="_blank">Twitter</a></li>
  </ul>
</li>

<li class="nav-dropdown-container ecosystem">
  <a class="nav-link">Ecosystem</a><span class="arrow"></span>
  <ul class="nav-dropdown">
    <li><a href="https://github.com/StellarFw/Identify" class="nav-link" target="_blank">Identify</a></li>
  </ul>
</li>


  </ul>
  <div class="list">
    <div class="main-sponsor"></div>
    <a class="become-backer" href="/support-stellar">
      Become a Backer
    </a>

    <ul class="menu-root">
      
        
        
          
        

        <li>
          <a href="/guide/index.html" class="sidebar-link">Overview</a>
        </li>
      
        
        
          
        

        <li>
          <a href="/guide/installation.html" class="sidebar-link">Installation</a>
        </li>
      
        
        
          
        

        <li>
          <a href="/guide/actions.html" class="sidebar-link">Actions</a>
        </li>
      
        
        
          
        

        <li>
          <a href="/guide/tasks.html" class="sidebar-link">Tasks</a>
        </li>
      
        
        
          
        

        <li>
          <a href="/guide/middleware.html" class="sidebar-link">Middleware</a>
        </li>
      
        
        
          
        

        <li>
          <a href="/guide/satellites.html" class="sidebar-link">Satellites</a>
        </li>
      
        
        
          
        

        <li>
          <a href="/guide/cluster.html" class="sidebar-link">Cluster</a>
        </li>
      
        
        
          
        

        <li>
          <a href="/guide/cache.html" class="sidebar-link">Cache</a>
        </li>
      
        
        
          
        

        <li>
          <a href="/guide/chat.html" class="sidebar-link">Chat</a>
        </li>
      
        
        
          
        

        <li>
          <a href="/guide/development_mode.html" class="sidebar-link">Development Mode</a>
        </li>
      
        
        
          
        

        <li>
          <a href="/guide/file_system.html" class="sidebar-link">File System</a>
        </li>
      
        
        
          
        

        <li>
          <a href="/guide/events.html" class="sidebar-link">Events</a>
        </li>
      
        
        
          
        

        <li>
          <a href="/guide/websocket.html" class="sidebar-link">WebSocket</a>
        </li>
      
        
        
          
        

        <li>
          <a href="/guide/tcp.html" class="sidebar-link">TCP</a>
        </li>
      
        
        
          
        

        <li>
          <a href="/guide/http.html" class="sidebar-link">HTTP</a>
        </li>
      
        
        
          
        

        <li>
          <a href="/guide/security.html" class="sidebar-link">Security</a>
        </li>
      
        
        
          
        

        <li>
          <a href="/guide/validation.html" class="sidebar-link current">Validation</a>
        </li>
      
        
        
          
        

        <li>
          <a href="/guide/logging.html" class="sidebar-link">Logging</a>
        </li>
      
        
        
          
        

        <li>
          <a href="/guide/commands.html" class="sidebar-link">Commands</a>
        </li>
      
        
        
          
        

        <li>
          <a href="/guide/testing.html" class="sidebar-link">Testing</a>
        </li>
      
        
        
          
            <li><h3>Models</h3></li>
          
        

        <li>
          <a href="/guide/models.html" class="sidebar-link">Introduction</a>
        </li>
      
        
        
          
        

        <li>
          <a href="/guide/models-data_types.html" class="sidebar-link">Data Types and Attributes</a>
        </li>
      
        
        
          
        

        <li>
          <a href="/guide/models-validations.html" class="sidebar-link">Validations</a>
        </li>
      
        
        
          
        

        <li>
          <a href="/guide/models-instance.html" class="sidebar-link">Instance and Class Methods</a>
        </li>
      
        
        
          
        

        <li>
          <a href="/guide/models-associations.html" class="sidebar-link">Associations</a>
        </li>
      
        
        
          
        

        <li>
          <a href="/guide/models-configurations.html" class="sidebar-link">Model Configuration</a>
        </li>
      
        
        
          
        

        <li>
          <a href="/guide/models-queries.html" class="sidebar-link">Queries</a>
        </li>
      
    </ul>
  </div>
</div>



<div class="content guide with-sidebar validation-guide">
  
    <h1>Validation</h1>
  

  <h2 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h2><p>Stelar provides a powerful system to validate your application’s incoming data. You can specify rules in the inputs of your actions or use the validation system directly, given the data to be validated and a set of rules.</p>
<h2 id="Validation-Quickstart"><a href="#Validation-Quickstart" class="headerlink" title="Validation Quickstart"></a>Validation Quickstart</h2><p>To learn about Stellar’s powerful validation features, let’s look at a complete example of validating an action request and displaying the error messages.</p>
<p>To use the validation system directly in your actions’ declarations to automatically validate the requests you just need specify the rules on your inputs. On the follow example there is an action to register an user, this action receives an email and a password who needs to be confirmed.</p>
<figure class="highlight js"><table><tr><td class="code"><pre><div class="line">exports.registerUser = &#123;</div><div class="line">  <span class="attr">name</span>: <span class="string">'registerUser'</span>,</div><div class="line">  <span class="attr">description</span>: <span class="string">'This action registers a new user.'</span></div><div class="line"></div><div class="line">  inputs: &#123;</div><div class="line">    <span class="attr">email</span>: &#123;</div><div class="line">      <span class="attr">validator</span>: <span class="string">'required|email'</span></div><div class="line">    &#125;,</div><div class="line">    <span class="attr">password</span>: &#123;</div><div class="line">      <span class="attr">validator</span>: <span class="string">'required|confirmed'</span></div><div class="line">    &#125;</div><div class="line">  &#125;,</div><div class="line"></div><div class="line">  run (api, action, next) &#123;</div><div class="line">    <span class="comment">// logic to register the user...</span></div><div class="line"></div><div class="line">    next()</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>To set the validation rules for a input field you must set the <code>validator</code> property with the desired rules.</p>
<h2 id="Available-Validation-Rules"><a href="#Available-Validation-Rules" class="headerlink" title="Available Validation Rules"></a>Available Validation Rules</h2><p>Below is a list of all available validation rules and their function:</p>
<p><a name="rule-alpha"></a></p>
<h3 id="alpha"><a href="#alpha" class="headerlink" title="alpha"></a>alpha</h3><p>The field under validation must be entirely alphabetic characters.</p>
<p><a name="rule-alpha-dash"></a></p>
<h3 id="alpha-dash"><a href="#alpha-dash" class="headerlink" title="alpha_dash"></a>alpha_dash</h3><p>The fields under validation may have alpha-numeric characters, as well as dashes and underscores.</p>
<p><a name="rule-alpha-num"></a></p>
<h3 id="alpha-num"><a href="#alpha-num" class="headerlink" title="alpha_num"></a>alpha_num</h3><p>The field under validation must be entirely alpha-numeric characters.</p>
<p><a name="rule-array"></a></p>
<h3 id="array"><a href="#array" class="headerlink" title="array"></a>array</h3><p>The field under validation must be an <code>array</code>.</p>
<p><a name="rule-before"></a></p>
<h3 id="before-date"><a href="#before-date" class="headerlink" title="before:date"></a>before:<em>date</em></h3><p>The field under validation must be a value preceding the given date.</p>
<p><a name="rule-between"></a></p>
<h3 id="between-min-max"><a href="#between-min-max" class="headerlink" title="between:min,max"></a>between:<em>min</em>,<em>max</em></h3><p>The field under validation must have a size between the given <em>min</em> and <em>max</em>. Strings, numerics, and arrays are evaluated in the same fashion as the <a href="#rule-size"><code>size</code></a> rule.</p>
<p><a name="rule-boolean"></a></p>
<h3 id="boolean"><a href="#boolean" class="headerlink" title="boolean"></a>boolean</h3><p>The field under validation must be able to cast as a boolean. Accepted input are <code>true</code> and <code>false</code>.</p>
<p><a name="rule-confirmed"></a></p>
<h3 id="confirmed"><a href="#confirmed" class="headerlink" title="confirmed"></a>confirmed</h3><p>The field under validation must have a matching field of <code>foo_confirmation</code>. For example, if the field under validation is <code>password</code>, a matching <code>password_confirmation</code> field must be present in the input.</p>
<p><a name="rule-date"></a></p>
<h3 id="date"><a href="#date" class="headerlink" title="date"></a>date</h3><p>The field under validation must be a valid date according to the <code>Date</code> JavaScript function.</p>
<p><a name="rule-different"></a></p>
<h3 id="different-field"><a href="#different-field" class="headerlink" title="different:field"></a>different:<em>field</em></h3><p>The field under validation must have a different value than <em>field</em>.</p>
<p><a name="rule-email"></a></p>
<h3 id="email"><a href="#email" class="headerlink" title="email"></a>email</h3><p>The field under validation must be formatted as an e-mail address.</p>
<p><a name="rule-filled"></a></p>
<h3 id="filled"><a href="#filled" class="headerlink" title="filled"></a>filled</h3><p>The field under validation must not be empty when it is present.</p>
<p><a name="rule-in"></a></p>
<h3 id="in-foo-bar-…"><a href="#in-foo-bar-…" class="headerlink" title="in:foo,bar,…"></a>in:<em>foo</em>,<em>bar</em>,…</h3><p>The field under validation must be included in the given list of values.</p>
<p><a name="rule-ip"></a></p>
<h3 id="ip"><a href="#ip" class="headerlink" title="ip"></a>ip</h3><p>The field under validation must be an IP address.</p>
<p><a name="rule-json"></a></p>
<h3 id="json"><a href="#json" class="headerlink" title="json"></a>json</h3><p>The field under validation must be a valid JSON string.</p>
<p><a name="rule-max"></a></p>
<h3 id="max"><a href="#max" class="headerlink" title="max"></a>max</h3><p>The field under validation must be less than or equal to a maximum <em>value</em>. Strings, numerics, and arrays are evaluated in the same fashion as the <a href="#rule-size"><code>size</code></a> rule.</p>
<p><a name="rule-min"></a></p>
<h3 id="min"><a href="#min" class="headerlink" title="min"></a>min</h3><p>The field under validation must have a minimum <em>value</em>. Strings, numerics, and arrays are evaluated in the same fashion as the <a href="#rule-size"><code>size</code></a> rule.</p>
<p><a name="rule-not-in"></a></p>
<h3 id="not-in-foo-bar-…"><a href="#not-in-foo-bar-…" class="headerlink" title="not_in:foo,bar,…"></a>not_in:<em>foo</em>,<em>bar</em>,…</h3><p>The field under validation must not be included in the given list of values.</p>
<p><a name="rule-regex"></a></p>
<h3 id="regex-pattern-flags"><a href="#regex-pattern-flags" class="headerlink" title="regex:pattern,flags"></a>regex:<em>pattern</em>,<em>flags</em></h3><p>The field under validation must match the given regular expression.</p>
<blockquote>
<p><strong>Note:</strong> When using the <code>regex</code> pattern, it may be necessary to specify rules in an array instead of using pipe delimiters, especially if the regular expression contains a pipe character.</p>
</blockquote>
<p><a name="rule-required"></a></p>
<h3 id="required"><a href="#required" class="headerlink" title="required"></a>required</h3><p>The field under validation must be present in the input data.</p>
<p><a name="rule-required-if"></a></p>
<h3 id="required-if-anotherfield-value-…"><a href="#required-if-anotherfield-value-…" class="headerlink" title="required_if:anotherfield,value,…"></a>required_if:<em>anotherfield</em>,<em>value</em>,…</h3><p>The fields under validation must be present and not empty if the <em>anotherfield</em> field is equal to any <em>value</em>.</p>
<p><a name="rule-required-unless"></a></p>
<h3 id="required-unless-anotherfield-value-…"><a href="#required-unless-anotherfield-value-…" class="headerlink" title="required_unless:anotherfield,value,…"></a>required_unless:<em>anotherfield</em>,<em>value</em>,…</h3><p>The field under validation must be present and not empty unless the <em>anotherfield</em> field is equal to any <em>value</em>.</p>
<p><a name="rule-required-with"></a></p>
<h3 id="required-with-foo-bar-…"><a href="#required-with-foo-bar-…" class="headerlink" title="required_with:foo,bar,…"></a>required_with:<em>foo</em>,<em>bar</em>,…</h3><p>the field under validation must be present and not empty <strong>only if</strong> any of the other specified field are present.</p>
<p><a name="rule-required-with-all"></a></p>
<h3 id="required-with-all-foo-bar-…"><a href="#required-with-all-foo-bar-…" class="headerlink" title="required_with_all:foo,bar,…"></a>required_with_all:<em>foo</em>,<em>bar</em>,…</h3><p>The field under validation must be present and not empty <strong>only if</strong> all of the other specified fields are present.</p>
<p><a name="rule-required-without"></a></p>
<h3 id="required-without-foo-bar-…"><a href="#required-without-foo-bar-…" class="headerlink" title="required_without:foo,bar,…"></a>required_without:<em>foo</em>,<em>bar</em>,…</h3><p>The field under validation must be present and not empty <strong>only when</strong> any of the other specified fields are not present.</p>
<p><a name="rule-required-without-all"></a></p>
<h3 id="required-without-all-foo-bar-…"><a href="#required-without-all-foo-bar-…" class="headerlink" title="required_without_all:foo,bar,…"></a>required_without_all:<em>foo</em>,<em>bar</em>,…</h3><p>The field under validation must be present and not empty <strong>only when</strong> all of the other specified fields are not present.</p>
<p><a name="rule-same"></a></p>
<h3 id="same-field"><a href="#same-field" class="headerlink" title="same:field"></a>same:<em>field</em></h3><p>The given <em>field</em> must match the field under validation.</p>
<p><a name="rule-size"></a></p>
<h3 id="size-value"><a href="#size-value" class="headerlink" title="size:value"></a>size:<em>value</em></h3><p>The field under validation must have a size matching the given <em>value</em>. For string data, <em>value</em> corresponds to the number of characters. For numeric data, <em>value</em> corresponds to a given integer value. For an array, <em>size</em> corresponds to the <code>length</code> of the array.</p>
<p><a name="rule-url"></a></p>
<h3 id="url"><a href="#url" class="headerlink" title="url"></a>url</h3><p>The field under validation must be a valid URL.</p>
<h2 id="Using-Functions-as-a-Validator"><a href="#Using-Functions-as-a-Validator" class="headerlink" title="Using Functions as a Validator"></a>Using Functions as a Validator</h2><p>You can also use functions to validate your input. Please, don’t use arrow functions otherwise Stellar will not be able to inject the <code>api</code> instance as the context (<code>this</code>). The function receives one parameter, who is the inputted value.</p>
<figure class="highlight js"><table><tr><td class="code"><pre><div class="line">exports.example = &#123;</div><div class="line">  <span class="attr">name</span>: <span class="string">'example'</span>,</div><div class="line"></div><div class="line">  <span class="attr">inputs</span>: &#123;</div><div class="line">    <span class="attr">value</span>: &#123;</div><div class="line">      <span class="attr">validator</span>: <span class="function"><span class="keyword">function</span> (<span class="params">value</span>) </span>&#123;</div><div class="line">        <span class="keyword">return</span> (value === <span class="string">'test123'</span>) ? <span class="literal">true</span> : <span class="string">'This is an error message!'</span></div><div class="line">      &#125;</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>The function must return an <code>Boolean</code> or a <code>String</code>, where <code>String</code> or <code>false</code> means that the validation failed. If a <code>String</code> is returned this will be used as the error message.</p>
<h2 id="Automatic-Error-Response"><a href="#Automatic-Error-Response" class="headerlink" title="Automatic Error Response"></a>Automatic Error Response</h2><p>Stellar can generate automatic error responses when at least one input field don’t match with the validation rules defined in the action. The error message is always a hash here the key is the field name and the value is the effective error for that field. The follow snippet shows an error response:</p>
<figure class="highlight json"><table><tr><td class="code"><pre><div class="line">&#123;</div><div class="line">  <span class="attr">"error"</span>: &#123;</div><div class="line">    <span class="attr">"email"</span>: <span class="string">"The email must be a valid email address."</span>,</div><div class="line">    <span class="attr">"password"</span>: <span class="string">"The password field is required."</span></div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>


  
      <div class="guide-links">
        
          <span>← <a href="/guide/security.html">Security</a></span>
        
        
          <span style="float:right"><a href="/guide/logging.html">Logging</a> →</span>
        
      </div>
    

    <div class="footer">
      Caught a mistake or want to contribute to documentation?
      <a href="https://github.com/StellarFw/stellar-framework.com/tree/master/src/guide/validation.md" target="_blank">
        Edit this page on Github!
      </a>
    </div>
</div>

        
      </div>
      <script src="/js/smooth-scroll.min.js"></script>
    

    <!-- search -->
    <link href="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="/css/search.css">
    <script src="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.js" type="text/javascript"></script>

    <!-- main custom script for sidebar and other cool things -->
    <script src="/js/common.js"></script>

    <!-- ga -->
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-77611901-1', 'stellar-framework.com');
      ga('send', 'pageview');
    </script>

    <!-- fastclick  -->
    <script src="//cdnjs.cloudflare.com/ajax/libs/fastclick/1.0.6/fastclick.min.js"></script>
    <script>
      document.addEventListener('DOMContentLoaded', function() {
        FastClick.attach(document.body)
      }, false)
    </script>
  </body>
</html>
